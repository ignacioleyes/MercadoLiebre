<!DOCTYPE html>
<html lang="en">
    <%- include("../partials/head.ejs") %>
<body>
    <%- include("../partials/header.ejs") %>  
    <section class="forms">
        <h2>Registro de usuario</h2>
        <form action="../users/register" method="POST" class="form-registro" enctype="multipart/form-data">
            <div class="control-formulario">
                <label>Nombre y apellido:</label>
                <input type="text" name="nombre" class="control" value="<%= locals.oldData ? oldData.nombre : null %>">
                <% if (locals.errors && errors.nombre) { %>
                    <div class="errorMsg">
                        <%= errors.nombre.msg %> 
                    </div>
                <% } %>
            </div>
            <div class="control-formulario">
                <label>e-mail:</label>
                <input type="email" name="email" placeholder="un@email.com" class="control" value="<%= locals.oldData ? oldData.email : null %> ">
                <% if (locals.errors && errors.email) { %>
                    <div class="errorMsg">
                        <%= errors.email.msg %> 
                    </div>
                <% } %>
            </div>
            <div class="control-formulario">
                <label>Fecha de nacimiento:</label>
                <input type="date" name="fechaNacimiento" placeholder="Fecha de nacimiento" class="control" value="<%= locals.oldData ? oldData.fechaNacimiento : null %> ">
                <% if (locals.errors && errors.fechaNacimiento) { %>
                    <div class="errorMsg">
                        <%= errors.fechaNacimiento.msg %> 
                    </div>
                <% } %>
            </div>
            <div class="control-formulario">
                <label>Domicilio:</label>
                <input type="text" name="domicilio" class="control" value="<%= locals.oldData ? oldData.domicilio : null %>">
                <% if (locals.errors && errors.domicilio) { %>
                    <div class="errorMsg">
                        <%= errors.domicilio.msg %> 
                    </div>
                <% } %>
            </div>
            <div class="control-formulario">
                <label>Seleccioná tu perfil de usuario:</label>
                <select name="perfilUsuario" class="control">
                    <option value="">Elegí un perfil</option>
                    <%
                        let users = ["Comprar", "Vender"]; 
                    %>
                    <% for( let oneUser of users ) { %>
                        <option value="<%= oneUser %>" <%= locals.oldData && (oneUser === oldData.perfilUsuario) ? "selected" : null %> > <%= oneUser %> </option>  
                    <% } %> 
                </select>
                <% if (locals.errors && errors.perfilUsuario) { %>
                    <div class="errorMsg">
                        <%= errors.perfilUsuario.msg %> 
                    </div>
                <% } %>
            </div>
            <div class="control-formulario">
                <label>Categorías de interés:</label>
                <label><input type="checkbox" name="categorias" value="electro">Electro</label>
                <label><input type="checkbox" name="categorias" value="moda">Moda</label>
                <label><input type="checkbox" name="categorias" value="hogar">Hogar</label>
                <label><input type="checkbox" name="categorias" value="jugueteria">Juguetería</label>
                <label><input type="checkbox" name="categorias" value="vida-sana">Vida sana</label>
                <% if (locals.errors && errors.categorias) { %>
                    <div class="errorMsg">
                        <%= errors.categorias.msg %> 
                    </div>
                <% } %>
            </div> 
            <div class="control-formulario">
                <label>Ingresá una foto</label>
                <input type="file" name="avatar" class="control">
                <% if (locals.errors && errors.avatar) { %>
                    <div class="errorMsg">
                        <%= errors.avatar.msg %> 
                    </div>
                <% } %>
            </div> 
            <div class="control-formulario">
                <label>Contraseña:</label>
                <input type="password" name="password" class="control" minlength="8" maxlength="15">
                <% if (locals.errors && errors.password) { %>
                    <div class="errorMsg">
                        <%= errors.password.msg %> 
                    </div>
                <% } %>
            </div>  
            <div class="control-formulario">
                <label>Confirmar contraseña:</label>
                <input type="password" name="repassword" class="control" minlength="8" maxlength="15">
                <% if (locals.errors && errors.password) { %>
                    <div class="errorMsg">
                        <%= errors.password.msg %> 
                    </div>
                <% } %>
            </div>  
                <button type="reset" class="boton">Borrar</button>
                <button type="submit" class="boton">Enviar</button>
        </form> 
    </section>     

</body>
    <%- include("../partials/footer.ejs") %>
</html>